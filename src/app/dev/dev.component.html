<div class="dev-container">
  <!-- Header Section -->
  <mat-card class="header-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>developer_mode</mat-icon>
        Development Dashboard
      </mat-card-title>
      <mat-card-subtitle>
        Development tools and system information
      </mat-card-subtitle>
    </mat-card-header>
  </mat-card>

  <div class="cards-grid">
    <!-- API Testing Section -->
    <mat-card class="tool-card">
      <mat-card-header>
        <mat-card-title>API Testing</mat-card-title>
        <mat-card-subtitle>Test API connections and monitor status</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div class="api-info" *ngIf="systemInfo$ | async as systemInfo">
          <p><strong>API URL:</strong> {{ systemInfo.apiUrl }}</p>

          <div *ngIf="apiStatus$ | async as apiStatus" class="api-status">
            <mat-chip-set>
              <mat-chip [color]="apiStatus.status === 'online' ? 'primary' : 'warn'">
                {{ apiStatus.status | titlecase }}
              </mat-chip>
              <mat-chip>{{ apiStatus.responseTime.toFixed(2) }}ms</mat-chip>
            </mat-chip-set>
          </div>
        </div>
      </mat-card-content>

      <mat-card-actions>
        <button mat-raised-button
                color="primary"
                (click)="testApi()"
                [disabled]="isLoadingApi$ | async">
          <mat-icon *ngIf="!(isLoadingApi$ | async)">wifi_find</mat-icon>
          <mat-progress-spinner *ngIf="isLoadingApi$ | async"
                               diameter="20"
                               mode="indeterminate">
          </mat-progress-spinner>
          {{ (isLoadingApi$ | async) ? 'Testing...' : 'Test API' }}
        </button>
      </mat-card-actions>
    </mat-card>

    <!-- Storage Management Section -->
    <mat-card class="tool-card">
      <mat-card-header>
        <mat-card-title>Storage Management</mat-card-title>
        <mat-card-subtitle>Manage browser storage</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p>Clear browser storage to reset application state</p>
      </mat-card-content>

      <mat-card-actions>
        <button mat-button color="warn" (click)="clearLocalStorage()">
          <mat-icon>delete_sweep</mat-icon>
          Clear Local
        </button>
        <button mat-button color="warn" (click)="clearSessionStorage()">
          <mat-icon>clear_all</mat-icon>
          Clear Session
        </button>
        <button mat-stroked-button color="warn" (click)="clearStorage()">
          <mat-icon>delete_forever</mat-icon>
          Clear All
        </button>
      </mat-card-actions>
    </mat-card>

    <!-- Theme Controls Section -->
    <mat-card class="tool-card">
      <mat-card-header>
        <mat-card-title>Theme Controls</mat-card-title>
        <mat-card-subtitle>Manage application appearance</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p>Current theme: <strong>{{ currentTheme$ | async | titlecase }}</strong></p>
      </mat-card-content>

      <mat-card-actions>
        <button mat-raised-button color="accent" (click)="toggleTheme()">
          <mat-icon>{{ (currentTheme$ | async) === 'light' ? 'dark_mode' : 'light_mode' }}</mat-icon>
          Toggle Theme
        </button>
      </mat-card-actions>
    </mat-card>

    <!-- System Information Section -->
    <mat-card class="system-info-card">
      <mat-card-header>
        <mat-card-title>System Information</mat-card-title>
        <mat-card-subtitle>
          <button mat-icon-button (click)="refreshSystemInfo()" matTooltip="Refresh">
            <mat-icon>refresh</mat-icon>
          </button>
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content *ngIf="systemInfo$ | async as systemInfo">
        <mat-list>
          <mat-list-item>
            <mat-icon matListItemIcon>access_time</mat-icon>
            <div matListItemTitle>Timestamp</div>
            <div matListItemLine>{{ systemInfo.timestamp | date:'medium' }}</div>
          </mat-list-item>

          <mat-divider></mat-divider>

          <mat-list-item>
            <mat-icon matListItemIcon>computer</mat-icon>
            <div matListItemTitle>Platform</div>
            <div matListItemLine>{{ systemInfo.platform }}</div>
          </mat-list-item>

          <mat-divider></mat-divider>

          <mat-list-item *ngIf="systemInfo.browser">
            <mat-icon matListItemIcon>web</mat-icon>
            <div matListItemTitle>Browser</div>
            <div matListItemLine>{{ systemInfo.browser.name }} {{ systemInfo.browser.version }}</div>
          </mat-list-item>

          <mat-divider></mat-divider>

          <mat-list-item *ngIf="systemInfo.browser">
            <mat-icon matListItemIcon>language</mat-icon>
            <div matListItemTitle>Language</div>
            <div matListItemLine>{{ systemInfo.browser.language }}</div>
          </mat-list-item>

          <mat-divider></mat-divider>

          <mat-list-item *ngIf="systemInfo.network">
            <mat-icon matListItemIcon>{{ systemInfo.network.isOnline ? 'wifi' : 'wifi_off' }}</mat-icon>
            <div matListItemTitle>Network Status</div>
            <div matListItemLine>
              {{ systemInfo.network.isOnline ? 'Online' : 'Offline' }}
              <span *ngIf="systemInfo.network.effectiveType">
                ({{ systemInfo.network.effectiveType }})
              </span>
            </div>
          </mat-list-item>
        </mat-list>

        <div *ngIf="browserFeatures$ | async as browserFeatures; else loadingFeatures" class="browser-features">
          <h4>Browser Features</h4>
          <mat-chip-set *ngIf="browserFeatures.length > 0">
            <mat-chip *ngFor="let feature of browserFeatures" color="primary">
              {{ feature }}
            </mat-chip>
          </mat-chip-set>
        </div>

        <ng-template #loadingFeatures>
          <div class="browser-features">
            <h4>Browser Features</h4>
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
          </div>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>
</div>
